define(["lib/react","lib/clib","stores/EngineVirtualStore"],function(e,t,n){function s(){return{engine:n.getState()}}var r=10,i=e.DOM;return e.createClass({displayName:"gamesLog",getInitialState:function(){return s()},componentDidMount:function(){n.addChangeListener(this._onChange)},componentWillUnmount:function(){n.removeChangeListener(this._onChange)},_onChange:function(){this.isMounted()&&this.setState(s())},_gameDetails:function(e){return function(){window.open("/game/"+e,"_blank")}},render:function(){var e=this,n=e.state.engine.tableHistory.slice(0,r).map(function(n,r){var s,o,u,a,f=n.player_info[e.state.engine.username];return f?(a=f.bonus,o=f.bet,f.stopped_at?(u=f.stopped_at/100*f.bet-f.bet,s=t.formatSatoshis(f.stopped_at)):(u=-o,s="-"),a?(u+=a,a=t.formatDecimals(a*100/o,2)+"%"):a="0%",u=t.formatSatoshis(u),o=t.formatSatoshis(o)):(s="-",o="-",u="-",a="-"),i.tr({key:"game_"+r,onClick:e._gameDetails(n.game_id)},i.td(null,t.formatSatoshis(n.game_crash),i.i(null,"x")),i.td(null,s),i.td(null,o),i.td(null,a),i.td(null,u))});return i.table({className:"games-log"},i.thead(null,i.tr(null,i.th(null,"Crash"),i.th(null,"@"),i.th(null,"Bet"),i.th(null,"Bonus"),i.th(null,"Profit"))),i.tbody(null,n))}})});