define(["lib/lodash","game-logic/engine","lib/events"],function(e,t,n){var r=function(t,r){this.stopScriptViewFunction=r,e.extend(this,n),t(this),this.startEngine()};return r.prototype.startEngine=function(){var e=["game_starting","game_started","game_crash","player_bet","cashed_out","msg","connected","disconnected"],n=this,r=e.map(function(e){var t=n.trigger.bind(n,e);return[e,t]});r.forEach(function(e){var n=e[0],r=e[1];t.on(n,r)}),this.events=r},r.prototype.stopScript=function(){var e=this;this.events.forEach(function(e){var n=e[0],r=e[1];t.off(n,r)})},r.prototype.getBalance=function(){return t.balanceSatoshis},r.prototype.getMaxBet=function(){return t.maxBet},r.prototype.getCurrentPayout=function(){return t.getGamePayout()},r.prototype.getUsername=function(){return t.username},r.prototype.getEngine=function(){return t},r.prototype.getMaxWin=function(){return t.maxWin},r.prototype.lastGamePlay=function(){return this.lastGamePlayed()?t.tableHistory[0].player_info[t.username].stopped_at?"WON":"LOST":"NOT_PLAYED"},r.prototype.lastGamePlayed=function(){return!!t.tableHistory[0].player_info[t.username]},r.prototype.placeBet=function(e,n,r){t.bet(e,n,r)},r.prototype.cashOut=function(e){t.cashOut(e)},r.prototype.stop=function(){this.stopScriptViewFunction()},r.prototype.chat=function(e){t.say(e)},r});