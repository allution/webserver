define(["lib/clib"],function(e){return function(t){return console.assert(t),function(n){var r=t.baseBet*100,i=r,s=Number(t.onLossIncreaseQty),o=Number(t.onWinIncreaseQty),u=Number(t.autoCashAt),a=Number(t.maxBetStop)*100;console.assert(e.isNumber(u)),n.on("game_starting",function(){var f=n.lastGamePlay();f=="LOST"?t.onLossSelectedOpt=="return_to_base"?i=r:(console.assert(e.isNumber(s)),i*=s):f=="WON"&&(t.onWinSelectedOpt=="return_to_base"?i=r:(console.assert(e.isNumber(o)),i*=o));var l=Math.round(i/100)*100;l>0&&l<=n.getBalance()&&l<=n.getMaxBet()&&l<=a?n.placeBet(l,Math.round(u*100),!1):(n.stop(),console.log("You ran out of bits or exceeded the max bet or betting nothing :("))})}}});